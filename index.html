<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TripA-B Tracker</title>

  <!-- ‚úÖ PWA Manifest -->
  <link rel="manifest" href="./manifest.json" />

  <!-- ‚úÖ Icons -->
  <link rel="icon" href="./icon-192.png" type="image/png" />
  <link rel="apple-touch-icon" href="./icon-512.png" />

  <!-- ‚úÖ Meta -->
  <meta name="theme-color" content="#0d6efd" />
  <meta name="description" content="TripA-B Tracking Progressive Web App" />
</head>

<body>
  <noscript>‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô JavaScript ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ</noscript>

  <!-- Loader -->
  <div id="loading" style="text-align:center; margin-top:40vh;">
    <h3>üöó ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î TripA-B...</h3>
  </div>

  <script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./service-worker.js').then(reg => {
    reg.onupdatefound = () => {
      const newWorker = reg.installing;
      newWorker.onstatechange = () => {
        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
          if (confirm('üîÑ ‡∏°‡∏µ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏´‡∏°?')) {
            newWorker.postMessage('SKIP_WAITING');
          }
        }
      };
    };
  });

  navigator.serviceWorker.addEventListener('controllerchange', () => {
    if (!window.__reloading) {
      window.__reloading = true;
      window.location.reload();
    }
  });
}
</script>
  </script>
</body>
</html>
